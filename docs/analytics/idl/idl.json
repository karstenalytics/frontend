{"address":"tUnst2Y2sbmgSgARBpSBZhqPzpoy2iUsdCwb5ToYVJa","metadata":{"name":"tuna_staking","version":"1.0.3","spec":"0.1.0","description":"DefiTuna Staking"},"instructions":[{"name":"claim_reward","docs":["Claim the reward accumulated for the user's position."],"discriminator":[149,95,181,242,94,90,158,162],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"treasury_reward_token_account","writable":true},{"name":"authority_reward_token_account","writable":true},{"name":"token_program"}],"args":[]},{"name":"compound_reward","docs":["Swaps an unclaimed reward for TUNA tokens in the FusionAMM pool and stakes them to the user's position."],"discriminator":[212,94,182,117,15,25,31,96],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"staked_token_mint"},{"name":"reward_token_mint"},{"name":"treasury_staked_token_account","writable":true},{"name":"treasury_reward_token_account","writable":true},{"name":"fusionamm_program"},{"name":"fusion_pool","writable":true},{"name":"token_program"},{"name":"memo_program"}],"args":[]},{"name":"compound_reward_two_hop","docs":["Swaps an unclaimed reward for TUNA tokens through two FusionAMM pools and stakes them to the user's position."],"discriminator":[149,245,127,251,253,249,167,129],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"staked_token_mint"},{"name":"intermediate_token_mint"},{"name":"reward_token_mint"},{"name":"treasury_staked_token_account","writable":true},{"name":"treasury_reward_token_account","writable":true},{"name":"fusionamm_program"},{"name":"fusion_pool_one","writable":true},{"name":"fusion_pool_two","writable":true},{"name":"token_program"},{"name":"memo_program"}],"args":[]},{"name":"create_treasury","docs":["Create a TUNA treasury."],"discriminator":[254,98,217,51,25,88,140,45],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"staked_token_mint"},{"name":"treasury","writable":true},{"name":"system_program"},{"name":"rent"}],"args":[{"name":"reward_token_mint","type":"pubkey"},{"name":"admin_authority","type":"pubkey"},{"name":"swap_authority","type":"pubkey"}]},{"name":"deposit_reward","docs":["Deposits unaccounted reward to the treasury.","The treasury ATA must be pre-funded before calling this instruction.","This instruction can be executed by any authority.","","#### Special Errors","- `NothingToDeposit` - Returned if the balance of treasury ATA is equal to the unclaimed reward amount."],"discriminator":[245,216,9,179,237,49,165,181],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"treasury_reward_token_account","writable":true},{"name":"reward_token_program"}],"args":[]},{"name":"initialize_position","docs":["Initialize the user's position account."],"discriminator":[219,192,234,71,190,191,102,80],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"owner"},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"system_program"}],"args":[]},{"name":"initialize_vesting_strategy","docs":["Initialize the user's vesting strategy account.","This instruction can be executed only by the admin authority."],"discriminator":[126,24,249,253,186,110,193,161],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"owner"},{"name":"treasury","writable":true},{"name":"vesting_strategy","writable":true},{"name":"system_program"}],"args":[]},{"name":"set_admin_authority","docs":["Set the authority that can adjust treasury settings and create vesting strategy accounts."],"discriminator":[72,49,37,167,149,98,49,174],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true}],"args":[{"name":"admin_authority","type":"pubkey"}]},{"name":"set_cooldown_interval","docs":["Set the cooldown interval for the treasury.","This instruction can be executed only by the admin authority."],"discriminator":[222,179,219,132,63,9,104,93],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true}],"args":[{"name":"cooldown","type":"u64"}]},{"name":"set_reward_authority","docs":["Set the authority that can execute swap and deposit reward instructions."],"discriminator":[34,39,183,252,83,28,85,127],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true}],"args":[{"name":"reward_authority","type":"pubkey"}]},{"name":"set_treasury_flags","docs":["Set treasury flags.","This instruction can be executed only by the admin authority."],"discriminator":[76,184,112,241,223,41,108,185],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true}],"args":[{"name":"flags","type":"u32"}]},{"name":"set_vesting_strategy","docs":["Set vesting strategy parameters.","This instruction can be executed only by the admin authority."],"discriminator":[158,75,81,15,214,6,179,41],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"owner"},{"name":"treasury","writable":true},{"name":"vesting_strategy","writable":true},{"name":"system_program"}],"args":[{"name":"locked_shares","type":"u64"},{"name":"unlock_period","type":"u16"},{"name":"unlock_rate","type":"u64"},{"name":"cliff","type":"u16"}]},{"name":"stake","docs":["Stake TUNA tokens to the treasury."],"discriminator":[206,176,202,18,200,209,179,108],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"owner"},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"treasury_staked_token_account","writable":true},{"name":"authority_staked_token_account","writable":true},{"name":"token_program"}],"args":[{"name":"shares","type":"u64"}]},{"name":"swap_reward_fusion","docs":["Swaps the rewards in an arbitrary token, accumulated in a treasury ATA, to the reward token (SOL) using the Fusion pool.","This instruction doesn't deposit rewards into the treasury. Use the 'deposit_reward' instruction to do so.","Can only be executed by the swap or admin authority."],"discriminator":[17,221,228,232,250,65,68,139],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"input_token_mint"},{"name":"reward_token_mint"},{"name":"input_token_program"},{"name":"reward_token_program"},{"name":"input_token_account","writable":true},{"name":"reward_token_account","writable":true},{"name":"fusionamm_program"},{"name":"fusion_pool","writable":true},{"name":"memo_program"}],"args":[]},{"name":"swap_reward_orca","docs":["Swaps the rewards in an arbitrary token, accumulated in a treasury ATA, to the reward token (SOL) using the Orca pool.","This instruction doesn't deposit rewards into the treasury. Use the 'deposit_reward' instruction to do so.","Can only be executed by the swap or admin authority."],"discriminator":[43,202,126,117,222,128,208,163],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"input_token_mint"},{"name":"reward_token_mint"},{"name":"input_token_program"},{"name":"reward_token_program"},{"name":"input_token_account","writable":true},{"name":"reward_token_account","writable":true},{"name":"whirlpool_program"},{"name":"whirlpool","writable":true},{"name":"memo_program"}],"args":[]},{"name":"unstake","docs":["Unstake TUNA tokens from the treasury. This instruction does not withdraw tokens or rewards.","Tokens and rewards can be withdrawn using the 'withdraw' instruction after the cooldown interval has expired."],"discriminator":[90,95,107,42,205,124,50,225],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"vesting_strategy","writable":true}],"args":[{"name":"shares","type":"u64"}]},{"name":"withdraw","docs":["Withdraw previously unstaked tokens."],"discriminator":[183,18,70,156,148,109,161,34],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"treasury","writable":true},{"name":"position","writable":true},{"name":"treasury_staked_token_account","writable":true},{"name":"treasury_reward_token_account","writable":true},{"name":"authority_staked_token_account","writable":true},{"name":"authority_reward_token_account","writable":true},{"name":"token_program"}],"args":[]}],"accounts":[{"name":"FusionPool","discriminator":[254,204,207,98,25,181,29,67]},{"name":"Position","discriminator":[170,188,143,228,122,64,247,208]},{"name":"Treasury","discriminator":[238,239,123,238,89,1,168,253]},{"name":"VestingStrategy","discriminator":[28,105,219,231,174,162,174,242]},{"name":"Whirlpool","discriminator":[63,149,209,12,225,128,99,9]}],"errors":[{"code":6000,"name":"InvalidInstructionArguments","msg":"Invalid instruction arguments"},{"code":6001,"name":"RemainingAccountsInsufficient","msg":"Insufficient remaining accounts"},{"code":6002,"name":"MathOverflow","msg":"Math overflow"},{"code":6003,"name":"MathUnderflow","msg":"Math underflow"},{"code":6004,"name":"TypeCastOverflow","msg":"Type cast overflow"},{"code":6005,"name":"TransferFeeCalculationError","msg":"Transfer fee calculation failed"},{"code":6006,"name":"UnsupportedTokenMint","msg":"Token mint has unsupported attributes"},{"code":6007,"name":"WithdrawRequestExceedsUserBalance","msg":"Withdraw request exceeds user balance"},{"code":6008,"name":"CooldownNotExpired","msg":"Tokens can't be unstaked because the cooldown has not expired"},{"code":6009,"name":"NothingToStake","msg":"Nothing to stake"},{"code":6010,"name":"NothingToCompound","msg":"Nothing to compound"},{"code":6011,"name":"NothingToDeposit","msg":"Nothing to deposit"},{"code":6012,"name":"NothingToWithdraw","msg":"Nothing to withdraw"},{"code":6013,"name":"NothingToSwap","msg":"Nothing to swap"},{"code":6014,"name":"NothingStaked","msg":"Nothing staked"},{"code":6015,"name":"StakedTokensLocked","msg":"Staked token are locked"},{"code":6016,"name":"StakingDisabled","msg":"Staking is disabled"},{"code":6017,"name":"UnstakingDisabled","msg":"Unstaking is disabled"},{"code":6018,"name":"WithdrawDisabled","msg":"Withdraw is disabled"}],"types":[{"name":"FusionPool","type":{"kind":"struct","fields":[{"name":"bump","type":{"array":["u8",1]}},{"name":"version","type":"u16"},{"name":"token_mint_a","type":"pubkey"},{"name":"token_mint_b","type":"pubkey"},{"name":"token_vault_a","type":"pubkey"},{"name":"token_vault_b","type":"pubkey"},{"name":"tick_spacing","type":"u16"},{"name":"tick_spacing_seed","type":{"array":["u8",2]}},{"name":"fee_rate","type":"u16"},{"name":"protocol_fee_rate","type":"u16"},{"name":"clp_reward_rate","type":"u16"},{"name":"order_protocol_fee_rate","type":"u16"},{"name":"liquidity","type":"u128"},{"name":"sqrt_price","type":"u128"},{"name":"tick_current_index","type":"i32"},{"name":"protocol_fee_owed_a","type":"u64"},{"name":"protocol_fee_owed_b","type":"u64"},{"name":"fee_growth_global_a","type":"u128"},{"name":"fee_growth_global_b","type":"u128"},{"name":"orders_total_amount_a","type":"u64"},{"name":"orders_total_amount_b","type":"u64"},{"name":"orders_filled_amount_a","type":"u64"},{"name":"orders_filled_amount_b","type":"u64"},{"name":"olp_fee_owed_a","type":"u64"},{"name":"olp_fee_owed_b","type":"u64"},{"name":"reserved","type":{"array":["u8",140]}}]}},{"name":"Position","type":{"kind":"struct","fields":[{"name":"version","docs":["Struct version"],"type":"u8"},{"name":"shares","docs":["The amount of staked tokens (shares) provided by the user"],"type":"u64"},{"name":"unstake_timestamp","docs":["Last unstake timestamp"],"type":"u64"},{"name":"pending_withdrawal_amount","docs":["The amount of tokens that the user can withdraw"],"type":"u64"},{"name":"reward_debt","docs":["Reward debt"],"type":"u64"},{"name":"unclaimed_reward","docs":["Unclaimed reward"],"type":"u64"},{"name":"reserved","docs":["Reserved"],"type":{"array":["u8",32]}}]}},{"name":"Treasury","type":{"kind":"struct","fields":[{"name":"version","docs":["Struct version"],"type":"u16"},{"name":"bump","docs":["Bump seed for the vault account"],"type":{"array":["u8",1]}},{"name":"staked_token_mint","docs":["Staked token mint"],"type":"pubkey"},{"name":"reward_token_mint","docs":["Reward token mint"],"type":"pubkey"},{"name":"admin_authority","docs":["Admin authority address. Can adjust treasury settings and initialize or set vesting strategies."],"type":"pubkey"},{"name":"reward_authority","docs":["The authority address that is allowed to execute reward swap and deposit instructions."],"type":"pubkey"},{"name":"flags","docs":["Various flags"],"type":"u32"},{"name":"cooldown_interval","docs":["The minimum required interval in seconds between the last staking and a possible withdrawal."],"type":"u64"},{"name":"total_staked_shares","docs":["The total amount of staked tokens."],"type":"u64"},{"name":"acc_reward_per_share","docs":["Reward per share (80.48)"],"type":"u128"},{"name":"total_reward","docs":["The total reward amount in the form of reward token (usually WSOL)."],"type":"u64"},{"name":"total_unclaimed_reward","docs":["The total unclaimed reward amount in the form of reward token (usually WSOL)."],"type":"u64"},{"name":"total_unstaked_shares","docs":["The total amount of unstaked tokens that have not yet been withdrawn."],"type":"u64"},{"name":"reserved","docs":["Reserved"],"type":{"array":["u8",112]}}]}},{"name":"VestingStrategy","type":{"kind":"struct","fields":[{"name":"version","docs":["Struct version"],"type":"u16"},{"name":"strategy","docs":["Vesting strategy (not used, should be zero)"],"type":"u8"},{"name":"locked_shares","docs":["The amount of locked shares"],"type":"u64"},{"name":"unlock_rate","docs":["The amount of shares to unlock per lock period"],"type":"u64"},{"name":"unlock_period","docs":["The token unlock period in hours, after which N tokens will be unlocked."],"type":"u16"},{"name":"lock_timestamp","docs":["The timestamp when the position has been locked"],"type":"u64"},{"name":"cliff","docs":["The period in hours after which the unlock starts. The first unlock occurs after 'cliff + unlock_period'."],"type":"u16"},{"name":"reserved","docs":["Reserved"],"type":{"array":["u8",62]}}]}},{"name":"Whirlpool","type":{"kind":"struct","fields":[{"name":"whirlpools_config","type":"pubkey"},{"name":"whirlpool_bump","type":{"array":["u8",1]}},{"name":"tick_spacing","type":"u16"},{"name":"fee_tier_index_seed","type":{"array":["u8",2]}},{"name":"fee_rate","type":"u16"},{"name":"protocol_fee_rate","type":"u16"},{"name":"liquidity","type":"u128"},{"name":"sqrt_price","type":"u128"},{"name":"tick_current_index","type":"i32"},{"name":"protocol_fee_owed_a","type":"u64"},{"name":"protocol_fee_owed_b","type":"u64"},{"name":"token_mint_a","type":"pubkey"},{"name":"token_vault_a","type":"pubkey"},{"name":"fee_growth_global_a","type":"u128"},{"name":"token_mint_b","type":"pubkey"},{"name":"token_vault_b","type":"pubkey"},{"name":"fee_growth_global_b","type":"u128"},{"name":"reward_last_updated_timestamp","type":"u64"},{"name":"reward_infos","type":{"array":[{"defined":{"name":"WhirlpoolRewardInfo"}},3]}}]}},{"name":"WhirlpoolRewardInfo","docs":["Stores the state relevant for tracking liquidity mining rewards at the `Whirlpool` level.","These values are used in conjunction with `PositionRewardInfo`, `Tick.reward_growths_outside`,","and `Whirlpool.reward_last_updated_timestamp` to determine how many rewards are earned by open","positions."],"type":{"kind":"struct","fields":[{"name":"mint","docs":["Reward token mint."],"type":"pubkey"},{"name":"vault","docs":["Reward vault token account."],"type":"pubkey"},{"name":"authority","docs":["Authority account that has permission to initialize the reward and set emissions."],"type":"pubkey"},{"name":"emissions_per_second_x64","docs":["Q64.64 number that indicates how many tokens per second are earned per unit of liquidity."],"type":"u128"},{"name":"growth_global_x64","docs":["Q64.64 number that tracks the total tokens earned per unit of liquidity since the reward","emissions were turned on."],"type":"u128"}]}}]}